2019-06-08 00:15:50.1469|DEBUG|Vsb.UrgentApp.API.WebApiApplication|Before InitializeNHibernate
2019-06-08 00:37:39.9669|DEBUG|Vsb.UrgentApp.API.WebApiApplication|System.Exception: Problem with database connection or configuration. ---> FluentNHibernate.Cfg.FluentConfigurationException: An invalid or incomplete configuration was used while creating a SessionFactory. Check PotentialReasons collection, and InnerException for more detail.

  * Database was not configured through Database method.
 ---> FirebirdSql.Data.FirebirdClient.FbException: I/O error during "CreateFile (open)" operation for file "C:\FBDATABASES\RTLSPRACOVNI.FDB"
Error while trying to open file ---> FirebirdSql.Data.Common.IscException: I/O error during "CreateFile (open)" operation for file "C:\FBDATABASES\RTLSPRACOVNI.FDB"
Error while trying to open file
   at FirebirdSql.Data.Client.Managed.Version10.GdsDatabase.ProcessResponse(IResponse response) in C:\Users\Jiri\Documents\devel\NETProvider\working\Provider\src\FirebirdSql.Data.FirebirdClient\Client\Managed\Version10\GdsDatabase.cs:line 639
   at FirebirdSql.Data.Client.Managed.Version10.GdsDatabase.ReadResponse() in C:\Users\Jiri\Documents\devel\NETProvider\working\Provider\src\FirebirdSql.Data.FirebirdClient\Client\Managed\Version10\GdsDatabase.cs:line 671
   at FirebirdSql.Data.Client.Managed.Version10.GdsDatabase.ReadGenericResponse() in C:\Users\Jiri\Documents\devel\NETProvider\working\Provider\src\FirebirdSql.Data.FirebirdClient\Client\Managed\Version10\GdsDatabase.cs:line 679
   at FirebirdSql.Data.Client.Managed.Version10.GdsDatabase.Attach(DatabaseParameterBuffer dpb, String dataSource, Int32 port, String database) in C:\Users\Jiri\Documents\devel\NETProvider\working\Provider\src\FirebirdSql.Data.FirebirdClient\Client\Managed\Version10\GdsDatabase.cs:line 220
   at FirebirdSql.Data.FirebirdClient.FbConnectionInternal.Connect() in C:\Users\Jiri\Documents\devel\NETProvider\working\Provider\src\FirebirdSql.Data.FirebirdClient\FirebirdClient\FbConnectionInternal.cs:line 157
   --- End of inner exception stack trace ---
   at FirebirdSql.Data.FirebirdClient.FbConnectionInternal.Connect() in C:\Users\Jiri\Documents\devel\NETProvider\working\Provider\src\FirebirdSql.Data.FirebirdClient\FirebirdClient\FbConnectionInternal.cs:line 182
   at FirebirdSql.Data.FirebirdClient.FbConnectionPoolManager.Pool.CreateNewConnectionIfPossibleImpl(FbConnectionString connectionString) in C:\Users\Jiri\Documents\devel\NETProvider\working\Provider\src\FirebirdSql.Data.FirebirdClient\FirebirdClient\FbConnectionPoolManager.cs:line 202
   at FirebirdSql.Data.FirebirdClient.FbConnectionPoolManager.Pool.GetConnection(FbConnection owner) in C:\Users\Jiri\Documents\devel\NETProvider\working\Provider\src\FirebirdSql.Data.FirebirdClient\FirebirdClient\FbConnectionPoolManager.cs:line 106
   at FirebirdSql.Data.FirebirdClient.FbConnectionPoolManager.Get(FbConnectionString connectionString, FbConnection owner) in C:\Users\Jiri\Documents\devel\NETProvider\working\Provider\src\FirebirdSql.Data.FirebirdClient\FirebirdClient\FbConnectionPoolManager.cs:line 221
   at FirebirdSql.Data.FirebirdClient.FbConnection.Open() in C:\Users\Jiri\Documents\devel\NETProvider\working\Provider\src\FirebirdSql.Data.FirebirdClient\FirebirdClient\FbConnection.cs:line 518
   at NHibernate.Connection.DriverConnectionProvider.GetConnection()
   at NHibernate.Tool.hbm2ddl.SuppliedConnectionProviderConnectionHelper.Prepare()
   at NHibernate.Tool.hbm2ddl.SchemaMetadataUpdater.GetReservedWords(Dialect dialect, IConnectionHelper connectionHelper)
   at NHibernate.Tool.hbm2ddl.SchemaMetadataUpdater.Update(ISessionFactory sessionFactory)
   at NHibernate.Impl.SessionFactoryImpl..ctor(Configuration cfg, IMapping mapping, Settings settings, EventListeners listeners)
   at NHibernate.Cfg.Configuration.BuildSessionFactory()
   at FluentNHibernate.Cfg.FluentConfiguration.BuildSessionFactory() in c:\work\coding\fluentNhibernate\src\FluentNHibernate\Cfg\FluentConfiguration.cs:line 230
   --- End of inner exception stack trace ---
   at FluentNHibernate.Cfg.FluentConfiguration.BuildSessionFactory() in c:\work\coding\fluentNhibernate\src\FluentNHibernate\Cfg\FluentConfiguration.cs:line 233
   at SharpArch.NHibernate.NHibernateSession.CreateSessionFactoryFor(IEnumerable`1 mappingAssemblies, AutoPersistenceModel autoPersistenceModel, Configuration cfg, IPersistenceConfigurer persistenceConfigurer) in z:\Builds\work\4c910366963b38a7\Solutions\SharpArch.NHibernate\NHibernateSession.cs:line 437
   at SharpArch.NHibernate.NHibernateSession.AddConfiguration(String factoryKey, String[] mappingAssemblies, AutoPersistenceModel autoPersistenceModel, String cfgFile, IDictionary`2 cfgProperties, String validatorCfgFile, IPersistenceConfigurer persistenceConfigurer) in z:\Builds\work\4c910366963b38a7\Solutions\SharpArch.NHibernate\NHibernateSession.cs:line 124
   at SharpArch.NHibernate.NHibernateSession.Init(ISessionStorage storage, String[] mappingAssemblies, AutoPersistenceModel autoPersistenceModel, String cfgFile, IDictionary`2 cfgProperties, String validatorCfgFile, IPersistenceConfigurer persistenceConfigurer) in z:\Builds\work\4c910366963b38a7\Solutions\SharpArch.NHibernate\NHibernateSession.cs:line 320
   at SharpArch.NHibernate.NHibernateSession.Init(ISessionStorage storage, String[] mappingAssemblies, AutoPersistenceModel autoPersistenceModel, String cfgFile) in z:\Builds\work\4c910366963b38a7\Solutions\SharpArch.NHibernate\NHibernateSession.cs:line 260
   at Vsb.UrgentApp.API.WebApiConfig.InitNHibernate(WebSessionStorage session, String[] mappingAssemblies) in C:\Users\atran1\Desktop\work\cak3\rtls\sw\src\SesterskaAplikace\v2\backend\Vsb.UrgentApp.UI\Vsb.UrgentApp.API\App_Start\WebApiConfig.cs:line 44
   at Vsb.UrgentApp.API.WebApiConfig.<>c__DisplayClass0_1.<InitializeNHibernate>b__0() in C:\Users\atran1\Desktop\work\cak3\rtls\sw\src\SesterskaAplikace\v2\backend\Vsb.UrgentApp.UI\Vsb.UrgentApp.API\App_Start\WebApiConfig.cs:line 34
   at SharpArch.NHibernate.NHibernateInitializer.InitializeNHibernateOnce(Action initMethod) in z:\Builds\work\4c910366963b38a7\Solutions\SharpArch.NHibernate\NHibernateInitializer.cs:line 53
   at Vsb.UrgentApp.API.WebApiConfig.InitializeNHibernate(WebSessionStorage session) in C:\Users\atran1\Desktop\work\cak3\rtls\sw\src\SesterskaAplikace\v2\backend\Vsb.UrgentApp.UI\Vsb.UrgentApp.API\App_Start\WebApiConfig.cs:line 34
   --- End of inner exception stack trace ---
   at Vsb.UrgentApp.API.WebApiConfig.InitializeNHibernate(WebSessionStorage session) in C:\Users\atran1\Desktop\work\cak3\rtls\sw\src\SesterskaAplikace\v2\backend\Vsb.UrgentApp.UI\Vsb.UrgentApp.API\App_Start\WebApiConfig.cs:line 38
   at Vsb.UrgentApp.API.WebApiApplication.Application_BeginRequest(Object sender, EventArgs e) in C:\Users\atran1\Desktop\work\cak3\rtls\sw\src\SesterskaAplikace\v2\backend\Vsb.UrgentApp.UI\Vsb.UrgentApp.API\Global.asax.cs:line 38
   at System.Web.HttpApplication.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStepImpl(IExecutionStep step)
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)
2019-06-08 00:37:43.7267|DEBUG|Vsb.UrgentApp.API.LogRequestAndResponseHandler|{"name":"admin","password":"admin","showEmail":false}
2019-06-08 00:37:46.1522|DEBUG|Vsb.UrgentApp.API.Filters.HttpExceptionFilter|Rest v1: UserPOST exception message: An ISessionStorage has not been configured. Arguments: System.Collections.Generic.Dictionary`2[System.String,System.Object]
2019-06-08 00:37:46.1702|ERROR|Vsb.UrgentApp.API.Filters.HttpExceptionFilter|SharpArch.Domain.PreconditionException: An ISessionStorage has not been configured
   at SharpArch.Domain.Check.Require(Boolean assertion, String message) in C:\work\sharp-arch\Solutions\SharpArch.Domain\DesignByContract\Check.cs:line 256
   at SharpArch.NHibernate.NHibernateSession.CurrentFor(String factoryKey) in z:\Builds\work\4c910366963b38a7\Solutions\SharpArch.NHibernate\NHibernateSession.cs:line 180
   at SharpArch.NHibernate.NHibernateRepositoryWithTypedId`2.get_Session() in z:\Builds\work\4c910366963b38a7\Solutions\SharpArch.NHibernate\NHibernateRepositoryWithTypedId.cs:line 49
   at SharpArch.NHibernate.LinqRepositoryWithTypedId`2.FindAll(ILinqSpecification`1 specification) in z:\Builds\work\4c910366963b38a7\Solutions\SharpArch.NHibernate\LinqRepositoryWithTypedId.cs:line 24
   at Vsb.UrgentApp.Tasks.User.UserTasks.GetUserAndUpdateLastAccess(UserDto userDto) in C:\Users\atran1\Desktop\work\cak3\rtls\sw\src\SesterskaAplikace\v2\backend\Vsb.UrgentApp.UI\Vsb.UrgentApp.Tasks\User\UserTasks.cs:line 43
   at Vsb.UrgentApp.Tasks.User.UserTasks.Authenticate(UserDto userDto) in C:\Users\atran1\Desktop\work\cak3\rtls\sw\src\SesterskaAplikace\v2\backend\Vsb.UrgentApp.UI\Vsb.UrgentApp.Tasks\User\UserTasks.cs:line 31
   at Vsb.UrgentApp.API.Controllers.UserController.Authenticate(UserDto userDto) in C:\Users\atran1\Desktop\work\cak3\rtls\sw\src\SesterskaAplikace\v2\backend\Vsb.UrgentApp.UI\Vsb.UrgentApp.API\Controllers\UserController.cs:line 42
   at lambda_method(Closure , Object , Object[] )
   at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass6_1.<GetExecutor>b__3(Object instance, Object[] methodParameters)
   at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ExecuteAsync(HttpControllerContext controllerContext, IDictionary`2 arguments, CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ExceptionFilterResult.<ExecuteAsync>d__6.MoveNext()
2019-06-08 00:37:46.2402|DEBUG|Vsb.UrgentApp.API.LogRequestAndResponseHandler|{
  "message": "An ISessionStorage has not been configured",
  "timestamp": "2019-06-08 00:37:46"
}
